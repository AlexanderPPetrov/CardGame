(function(t){function e(e){for(var a,r,c=e[0],o=e[1],l=e[2],u=0,f=[];u<c.length;u++)r=c[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&f.push(i[r][0]),i[r]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);d&&d(e);while(f.length)f.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,c=1;c<s.length;c++){var o=s[c];0!==i[o]&&(a=!1)}a&&(n.splice(e--,1),t=r(r.s=s[0]))}return t}var a={},i={app:0},n=[];function r(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=a,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(s,a,function(e){return t[e]}.bind(null,a));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var d=o;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0b13":function(t,e,s){"use strict";s("c9b9")},"2fc4":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("a026"),i=s("5f5b"),n=s("2ead"),r=s.n(n),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"h-100",attrs:{id:"app"}},[s("loader"),s("router-view")],1)},o=[],l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"loader"})},d=[],u={computed:{isLoading:function(){return this.$store.state.isLoading}}},f=u,m=(s("0b13"),s("2877")),g=Object(m["a"])(f,l,d,!1,null,null,null),h=g.exports,p={name:"App",components:{Loader:h}},v=p,C=Object(m["a"])(v,c,o,!1,null,"1049e9fe",null),_=C.exports,T=(s("2fc4"),s("8c4f")),E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"h-100 game-content d-flex align-items-center",class:{fadeIn:t.isLoaded}},[s("div",{staticClass:"align-items-center justify-content-center d-flex main-container flex-column"},[t.cardResults.length?s("div",{staticClass:"row align-items-center justify-content-center"},t._l(t.cardResultsFirst,(function(e){return s("mt-card",{key:e.id,attrs:{card:e,displayCardTitle:t.displayCardTitle}})})),1):t._e(),t.cardResults.length?s("div",{staticClass:"row align-items-center justify-content-center"},t._l(t.cardResultsSecond,(function(e){return s("mt-card",{key:e.id,attrs:{card:e,displayCardTitle:t.displayCardTitle}})})),1):t._e(),s("b-modal",{ref:"modal",attrs:{id:"modalGameEnd","no-close-on-esc":"","no-close-on-backdrop":"",centered:"",cancel:"false",size:"lg","ok-variant":"info btn-lg","ok-only":"","hide-header-close":""},on:{ok:t.newGame},model:{value:t.gameFinished,callback:function(e){t.gameFinished=e},expression:"gameFinished"}},[s("div",{staticClass:"h-100 d-flex justify-content-center flex-column"},[s("div",{staticClass:"result-header"},[t._v("Твоят резултат")]),s("div",{staticClass:"d-flex w-100 my-5"},[s("div",{staticClass:"stats-container align-items-center justify-content-center text-center d-flex flex-column"},[s("div",{staticClass:"d-flex align-items-center"},[s("i",{staticClass:"fas fa-star icon-star result-icon mr-3"}),s("span",{staticClass:"result"},[t._v(" "+t._s(t.getTryCount)+" ")])]),s("div",{staticClass:"result-label"},[t._v("Опити")])]),s("div",{staticClass:"stats-container align-items-center justify-content-center text-center d-flex flex-column"},[s("div",{staticClass:"d-flex align-items-center"},[s("i",{staticClass:"fas fa-stopwatch icon-clock result-icon mr-3"}),s("span",{staticClass:"result"},[t._v(" "+t._s(t._f("moment")(t._f("moment")(t.getPlayTime,"utc"),"HH:mm:ss"))+" ")])]),s("div",{staticClass:"result-label"},[t._v("Време")])]),s("div",{staticClass:"stats-container align-items-center justify-content-center text-center d-flex flex-column"},[s("div",{staticClass:"d-flex align-items-center"},[s("i",{staticClass:"fas fa-gamepad icon-level result-icon mr-3"}),s("span",{staticClass:"result"},[t._v(" "+t._s(t.getCurrentLevel)+" ")])]),s("div",{staticClass:"result-label"},[t._v("Трудност")])])]),s("div",{staticClass:"d-flex justify-content-center"},[s("b-button",{staticClass:"d-flex align-items-center",attrs:{variant:"info",size:"lg"},on:{click:t.newGame}},[s("i",{staticClass:"fa fa-play-circle btn-icon  mr-3"}),s("span",[t._v("НОВА ИГРА")])])],1)]),s("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"})])],1),t.showCongrats?s("div",[s("div",{staticClass:"congrats-container d-flex justify-content-center align-items-center flex-column"},[s("img",{staticClass:"bravo-image heartbeat",attrs:{src:t.getBravo}})])]):t._e()])},O=[],y=(s("fb6a"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-container js-card my-1 mx-1",class:{switched:!t.card.isOpened},on:{click:function(e){return t.flipCard(e)}}},[s("div",{staticClass:"card-wrapper"},[s("div",{staticClass:"card-side d-flex align-items-center justify-content-center",class:{active:t.card.isOpened,matched:t.card.isMatched,heartbeat:t.card.isMatched}},[s("img",{staticClass:"vh-image",attrs:{src:t.getCardFront}}),s("img",{staticClass:"card-image vh-image card-disabled-overlay",attrs:{src:t.getDisabledOverlay}}),s("img",{staticClass:"card-image vh-image card-asset",attrs:{src:t.getImage}}),t.displayCardTitle?s("span",{staticClass:"card-title"},[t._v(t._s(t.card.title))]):t._e(),t.card.isMatched?s("img",{staticClass:"star-image rotateScaleUp",class:{puffOutCenter:t.card.starOut},attrs:{src:t.getStar}}):t._e()]),s("div",{staticClass:"card-side card-side-back d-flex align-items-center justify-content-center",class:{active:!t.card.isOpened}},[s("img",{staticClass:"vh-image",attrs:{src:t.getCardBack}})])])])}),S=[],b={SET_LOADER:"SET_LOADER",SET_CARDS:"SET_CARDS",ADD_MATCHED_CARD:"ADD_MATCHED_CARD",UPDATE_CARD:"UPDATE_CARD",SET_GAME_FINISHED:"SET_GAME_FINISHED",SET_COUNT:"SET_COUNT",SET_START_TIME:"SET_START_TIME",SET_PLAY_TIME:"SET_PLAY_TIME",SET_CURRENT_LEVEL:"SET_CURRENT_LEVEL",SET_SHOW_CONGRATS:"SET_SHOW_CONGRATS"},A=(s("4de4"),s("7db0"),{getCardById:function(t){return function(e){return t.cards.find((function(t){return t.id===e}))}},getOpenedCards:function(t){return t.cards.filter((function(t){return t.isOpened&&!t.isMatched}))},getMatchedCards:function(t){return t.cards.filter((function(t){return t.isMatched}))}}),D=500,R="/static/media/select.mp3",j="/static/media/move.mp3",w="/static/media/matching.mp3",$="/static/media/level.mp3",M={name:"mt-card",props:{card:Object,displayCardTitle:Boolean},computed:{getCardFront:function(){var t="/static/img/card_front.png";return t},getImage:function(){var t="/static/img/"+this.card.image;return t},getCardBack:function(){var t="/static/img/card_back.png";return t},getDisabledOverlay:function(){var t="/static/img/card_disabled_overlay.png";return t},getStar:function(){var t="/static/img/star.png";return t}},data:function(){return{switching:!1}},methods:{closeOpenedCards:function(){var t=this;setTimeout((function(){for(var e=A.getOpenedCards(t.$store.state),s=0;s<e.length;s++)t.toggleOpenedCard(e[s])}),2*D)},toggleOpenedCard:function(t){var e=Object.assign({},t);e.isOpened=!t.isOpened,this.$store.commit(b.UPDATE_CARD,e),e.isOpened?this.playSound(R):this.playSound(j)},canOpenMore:function(){var t=A.getOpenedCards(this.$store.state);return 2!=t.length},setMatchedCards:function(){for(var t=this,e=A.getOpenedCards(this.$store.state),s=0;s<e.length;s++)this.markCardAsMatched(e[s]);setTimeout((function(){t.playSound(w)}),D/2),this.checkGameFinished()},checkGameFinished:function(){var t=this,e=A.getMatchedCards(this.$store.state);e.length==this.$store.state.cards.length&&(setTimeout((function(){t.playSound($),t.$store.commit(b.SET_SHOW_CONGRATS,!0)}),2e3),setTimeout((function(){t.$store.commit(b.SET_GAME_FINISHED,!0),t.$store.commit(b.SET_SHOW_CONGRATS,!1),t.$store.commit(b.SET_PLAY_TIME,((new Date).getTime()-t.$store.state.startTime)/1e3)}),6e3))},playSound:function(t){if(t){var e=new Audio(t);e.play()}},markCardAsMatched:function(t){var e=this,s=Object.assign({},t);s.isMatched=!0,this.$store.commit(b.UPDATE_CARD,s),setTimeout((function(){s.starOut=!0,e.$store.commit(b.UPDATE_CARD,s)}),2e3)},flipCard:function(){if(this.switching)return!1;var t=this.canOpenMore();if(t&&!this.card.isMatched){this.switching=!0,this.toggleOpenedCard(this.card);var e=A.getOpenedCards(this.$store.state);2==e.length&&(e[0].type==e[1].type?this.setMatchedCards():this.closeOpenedCards(),this.$store.commit(b.SET_COUNT,this.$store.state.tryCount+1)),this.switching=!1}}}},L=M,x=Object(m["a"])(L,y,S,!1,null,null,null),G=x.exports,I={data:function(){return{isLoaded:!1,displayCardTitle:!1}},created:function(){var t=this;setTimeout((function(){t.isLoaded=!0,t.startGame()}),1e3)},computed:{cardResults:function(){return this.$store.state.cards},cardResultsFirst:function(){return this.$store.state.cards.slice(0,this.$store.state.cards.length/2)},cardResultsSecond:function(){return this.$store.state.cards.slice(this.$store.state.cards.length/2,this.$store.state.cards.length)},gameFinished:function(){return this.$store.state.gameFinished},getTryCount:function(){return this.$store.state.tryCount},getPlayTime:function(){return this.$store.state.playTime},getCurrentLevel:function(){return this.$store.state.currentLevel+1},getBravo:function(){var t="/static/img/bravo.png";return t},showCongrats:function(){return this.$store.state.showCongrats}},methods:{startGame:function(){var t=this;this.displayCardTitle=!1,this.$store.commit(b.SET_START_TIME,(new Date).getTime()),this.$store.commit(b.SET_COUNT,0);var e=this.$store.state.currentLevel,s=this.$store.state.cardsData[e].level;this.$store.commit(b.SET_CARDS,s),setTimeout((function(){t.displayCardTitle=!0}),1e3)},newGame:function(){var t=this;this.$store.commit(b.SET_GAME_FINISHED,!1),setTimeout((function(){var e=t.$store.state.currentLevel+1;e>=t.$store.state.cardsData.length-1&&(e=t.$store.state.cardsData.length-1),t.$store.commit(b.SET_CURRENT_LEVEL,e),t.startGame()}),250)}},components:{MtCard:G}},k=I,N=(s("e8fb"),Object(m["a"])(k,E,O,!1,null,null,null)),U=N.exports;a["default"].use(T["a"]);var P,F=new T["a"]({routes:[{path:"/",name:"Game",components:{default:U}}]}),H=s("2f62"),q=(s("99af"),s("c740"),s("a434"),s("ade3")),B=s("2909"),W=s("2ef0"),V=s.n(W),Y=(P={},Object(q["a"])(P,b.SET_LOADER,(function(t,e){t.isLoading=e})),Object(q["a"])(P,b.SET_CARDS,(function(t,e){for(var s=[],a=0;a<e.length;a++){e[a].isMatched=!1,e[a].isOpened=!1,e[a].starOut=!1;var i={id:e.length+a,image:e[a].image,title:e[a].title,type:e[a].type,isMatched:e[a].isMatched,isOpened:e[a].isOpened,starOut:e[a].starOut};s.push(i)}console.log(JSON.stringify(s));var n=V.a.shuffle([].concat(s,Object(B["a"])(e)));t.cards=n})),Object(q["a"])(P,b.ADD_MATCHED_CARD,(function(t,e){t.matchedCards.push(e)})),Object(q["a"])(P,b.UPDATE_CARD,(function(t,e){var s=t.cards.findIndex((function(t){return t.id==e.id}));t.cards.splice(s,1,e)})),Object(q["a"])(P,b.SET_GAME_FINISHED,(function(t,e){t.gameFinished=e})),Object(q["a"])(P,b.SET_COUNT,(function(t,e){t.tryCount=e})),Object(q["a"])(P,b.SET_START_TIME,(function(t,e){t.startTime=e})),Object(q["a"])(P,b.SET_PLAY_TIME,(function(t,e){t.playTime=e})),Object(q["a"])(P,b.SET_CURRENT_LEVEL,(function(t,e){t.currentLevel=e})),Object(q["a"])(P,b.SET_SHOW_CONGRATS,(function(t,e){t.showCongrats=e})),P),J={GET_CARDS:"GET_CARDS"},z=s("bc3a"),K=s.n(z),Q={baseURL:"https://api.themoviedb.org/3/"},X={get:function(t,e,s,a){this.request({method:"get",url:t,params:a,success:e,failure:s})},post:function(t,e,s,a){this.request({method:"post",url:t,data:e,success:s,failure:a})},put:function(t,e,s,a){this.request({method:"put",url:t,data:e,success:s,failure:a})},delete:function(t,e,s){this.request({method:"delete",url:t,success:e,failure:s})},request:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.url){var e=Object.assign({method:"get",baseURL:Q.baseURL},t);e.params=Object.assign(t.params,{api_key:Q.apiKey}),K()(e).then((function(e){t.success&&t.success(e.data)})).catch((function(e){t.failure&&t.failure(e)}))}else console.log("URL is required")}},Z={getCards:function(t,e,s){X.get("trending/movie/day",e,s,t)}},tt=Object(q["a"])({},J.GET_CARDS,(function(t,e){var s=t.commit;s(b.SET_LOADER,!0),Z.getTrendingMovies(e,(function(t){s(b.SET_CARDS,t),s(b.SET_LOADER,!1)}),(function(t){console.log(t),s(b.SET_LOADER,!1)}))}));a["default"].use(H["a"]);var et={cardsData:[{level:[{id:0,image:"hat.png",title:"Шапка",type:"hat"},{id:1,image:"boots.png",title:"Ботуши",type:"boots"}]},{level:[{id:0,image:"hat.png",title:"Шапка",type:"hat"},{id:1,image:"boots.png",title:"Ботуши",type:"boots"},{id:2,image:"gloves.png",title:"Ръкавици",type:"gloves"}]},{level:[{id:0,image:"hat.png",title:"Шапка",type:"hat"},{id:1,image:"boots.png",title:"Обувки",type:"boots"},{id:2,image:"gloves.png",title:"Ръкавици",type:"gloves"},{id:3,image:"sweater.png",title:"Пуловер",type:"sweater"}]}],currentLevel:0,cards:[],isLoading:!1,gameFinished:!1,matchedCards:[],tryCount:0,startTime:(new Date).getTime(),playTime:(new Date).getTime(),showCongrats:!1},st=new H["a"].Store({state:et,getters:A,mutations:Y,actions:tt}),at=st;a["default"].use(i["a"]),a["default"].use(r.a),a["default"].config.productionTip=!1,new a["default"]({el:"#app",router:F,store:at,components:{App:_},template:"<App/>"})},c9b9:function(t,e,s){},e8fb:function(t,e,s){"use strict";s("f2f7")},f2f7:function(t,e,s){}});
//# sourceMappingURL=app.429d1387.js.map