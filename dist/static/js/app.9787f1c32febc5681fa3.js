webpackJsonp([1],{"/8fb":function(t,e){},"1/oy":function(t,e){},GfHa:function(t,e){},Id91:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),i=s("e6fC"),n=s("8AgW"),r=s.n(n),c={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{directives:[{name:"show",rawName:"v-show",value:this.isLoading,expression:"isLoading"}],staticClass:"loader"})},staticRenderFns:[]};var o={name:"App",components:{Loader:s("VU/8")({computed:{isLoading:function(){return this.$store.state.isLoading}}},c,!1,function(t){s("eUv8")},null,null).exports}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"h-100",attrs:{id:"app"}},[e("loader"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var l=s("VU/8")(o,d,!1,function(t){s("Oago")},"data-v-1049e9fe",null).exports,u=(s("/8fb"),s("/ocq")),m=s("woOf"),f=s.n(m),g="SET_LOADER",h="SET_CARDS",p="ADD_MATCHED_CARD",v="UPDATE_CARD",C="SET_GAME_FINISHED",_="SET_COUNT",y="SET_PLAY_TIME",O={getCardById:function(t){return function(e){return t.cards.find(function(t){return t.id===e})}},getOpenedCards:function(t){return t.cards.filter(function(t){return t.isOpened&&!t.isMatched})},getMatchedCards:function(t){return t.cards.filter(function(t){return t.isMatched})}},T={name:"mt-card",props:{card:Object},computed:{getCardFront:function(){return"/static/img/card_front.png"},getImage:function(){return"/static/img/"+this.card.image},getCardBack:function(){return"/static/img/card_back.png"},getDisabledOverlay:function(){return"/static/img/card_disabled_overlay.png"}},data:function(){return{switching:!1}},methods:{closeOpenedCards:function(){var t=this;setTimeout(function(){for(var e=O.getOpenedCards(t.$store.state),s=0;s<e.length;s++)t.toggleOpenedCard(e[s])},1e3)},toggleOpenedCard:function(t){var e=f()({},t);e.isOpened=!t.isOpened,this.$store.commit(v,e),e.isOpened?this.playSound("/static/media/select.mp3"):this.playSound("/static/media/move.mp3")},canOpenMore:function(){return 2!=O.getOpenedCards(this.$store.state).length},setMatchedCards:function(){for(var t=this,e=O.getOpenedCards(this.$store.state),s=0;s<e.length;s++)this.markCardAsMatched(e[s]);setTimeout(function(){t.playSound("/static/media/match.mp3")},250),this.checkGameFinished()},checkGameFinished:function(){O.getMatchedCards(this.$store.state).length==this.$store.state.cards.length&&(this.$store.commit(C,!0),this.$store.commit(y,((new Date).getTime()-this.$store.state.startTime)/1e3))},playSound:function(t){t&&new Audio(t).play()},markCardAsMatched:function(t){var e=f()({},t);e.isMatched=!0,this.$store.commit(v,e)},flipCard:function(){var t=this;if(this.switching)return!1;this.canOpenMore()&&!this.card.isMatched&&(this.switching=!0,setTimeout(function(){t.toggleOpenedCard(t.card);var e=O.getOpenedCards(t.$store.state);2==e.length&&(e[0].type==e[1].type?t.setMatchedCards():t.closeOpenedCards(),t.$store.commit(_,t.$store.state.tryCount+1)),t.switching=!1},250))}}},$={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-container js-card col-4 col-sm-3 my-1",class:{switched:!t.card.isOpened},on:{click:function(e){t.flipCard(e)}}},[s("div",{staticClass:"card-wrapper"},[s("div",{staticClass:"card-side d-flex align-items-center justify-content-center",class:{active:t.card.isOpened,matched:t.card.isMatched}},[s("img",{staticClass:"img-fluid vh-image",attrs:{src:t.getCardFront}}),t._v(" "),s("img",{staticClass:"card-image vh-image img-fluid card-disabled-overlay",attrs:{src:t.getDisabledOverlay}}),t._v(" "),s("img",{staticClass:"card-image img-fluid vh-image card-asset",attrs:{src:t.getImage}}),t._v(" "),s("span",{staticClass:"card-title"},[t._v(t._s(t.card.title))])]),t._v(" "),s("div",{staticClass:"card-side card-side-back d-flex align-items-center justify-content-center",class:{active:!t.card.isOpened}},[s("img",{staticClass:"img-fluid vh-image",attrs:{src:t.getCardBack}})])])])},staticRenderFns:[]},w={created:function(){this.$store.commit(h,this.$store.state.originalCards)},computed:{cardResults:function(){return this.$store.state.cards},gameFinished:function(){return this.$store.state.gameFinished},getTryCount:function(){return this.$store.state.tryCount},getPlayTime:function(){return this.$store.state.playTime}},methods:{newGame:function(){var t=this;this.$store.commit(C,!1),setTimeout(function(){t.$store.commit(h,t.$store.state.originalCards),t.$store.commit(_,0),t.$store.commit(y,(new Date).getTime())},250)}},components:{MtCard:s("VU/8")(T,$,!1,null,null,null).exports}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container h-100 align-items-center justify-content-center d-flex"},[s("div",{staticClass:"row"},t._l(t.cardResults,function(e){return t.cardResults.length?s("mt-card",{key:e.id,attrs:{card:e}}):t._e()})),t._v(" "),s("b-modal",{ref:"modal",attrs:{id:"modalGameEnd","no-close-on-esc":"","no-close-on-backdrop":"",centered:"",cancel:"false",size:"lg","ok-variant":"info btn-lg","ok-only":"","hide-header-close":""},on:{ok:t.newGame},model:{value:t.gameFinished,callback:function(e){t.gameFinished=e},expression:"gameFinished"}},[s("div",{staticClass:"d-flex justify-content-between"},[s("div",{staticClass:"w-50 d-flex align-items-center flex-column"},[s("div",{staticClass:"result result-count"},[t._v(t._s(t.getTryCount))]),t._v(" "),s("div",{staticClass:"result-label"},[t._v("Брой опити")])]),t._v(" "),s("div",{staticClass:"w-50 d-flex align-items-center flex-column"},[s("div",{staticClass:"result result-time"},[t._v(t._s(t._f("moment")(t._f("moment")(t.getPlayTime,"utc"),"HH:mm:ss")))]),t._v(" "),s("div",{staticClass:"result-label"},[t._v("Време")])])]),t._v(" "),s("span",{staticClass:"d-flex align-items-center",attrs:{slot:"modal-ok"},slot:"modal-ok"},[s("i",{staticClass:"fa fa-play-circle btn-icon mr-3"}),t._v(" "),s("span",[t._v("НОВА ИГРА")])])])],1)},staticRenderFns:[]};var M=s("VU/8")(w,b,!1,function(t){s("dCOi")},null,null).exports;a.a.use(u.a);var k,x=new u.a({routes:[{path:"/",name:"Game",components:{default:M}}]}),A=s("NYxO"),E=s("bOdI"),F=s.n(E),D=s("Gu7T"),R=s.n(D),L=s("mvHQ"),S=s.n(L),U=s("M4fF"),G=s.n(U),I=(k={},F()(k,g,function(t,e){t.isLoading=e}),F()(k,h,function(t,e){for(var s=[],a=0;a<e.length;a++){e[a].isMatched=!1,e[a].isOpened=!1;var i={id:e.length+a,image:e[a].image,title:e[a].title,type:e[a].type};s.push(i)}console.log(S()(s));var n=G.a.shuffle([].concat(s,R()(e)));t.cards=n}),F()(k,p,function(t,e){t.matchedCards.push(e)}),F()(k,v,function(t,e){var s=t.cards.findIndex(function(t){return t.id==e.id});t.cards.splice(s,1,e)}),F()(k,C,function(t,e){t.gameFinished=e}),F()(k,_,function(t,e){t.tryCount=e}),F()(k,y,function(t,e){t.playTime=e}),k),j=s("mtWM"),H=s.n(j),q={baseURL:"https://api.themoviedb.org/3/"},N={get:function(t,e,s,a){this.request({method:"get",url:t,params:a,success:e,failure:s})},post:function(t,e,s,a){this.request({method:"post",url:t,data:e,success:s,failure:a})},put:function(t,e,s,a){this.request({method:"put",url:t,data:e,success:s,failure:a})},delete:function(t,e,s){this.request({method:"delete",url:t,success:e,failure:s})},request:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.url){var e=f()({method:"get",baseURL:q.baseURL},t);e.params=f()(t.params,{api_key:q.apiKey}),H()(e).then(function(e){t.success&&t.success(e.data)}).catch(function(e){t.failure&&t.failure(e)})}else console.log("URL is required")}},P={getCards:function(t,e,s){N.get("trending/movie/day",e,s,t)}},V=F()({},"GET_CARDS",function(t,e){var s=t.commit;s(g,!0),P.getTrendingMovies(e,function(t){s(h,t),s(g,!1)},function(t){console.log(t),s(g,!1)})});a.a.use(A.a);var B={originalCards:[{id:0,image:"hat.png",title:"Шапка",type:"hat"},{id:1,image:"boots.png",title:"Обувки",type:"boots"},{id:2,image:"scarf.png",title:"Шал",type:"scarf"},{id:3,image:"sweater.png",title:"Пуловер",type:"sweater"}],cards:[],isLoading:!1,gameFinished:!1,matchedCards:[],tryCount:0,startTime:(new Date).getTime(),playTime:(new Date).getTime()},W=new A.a.Store({state:B,getters:O,mutations:I,actions:V});a.a.use(i.a),a.a.use(r.a),a.a.config.productionTip=!1,new a.a({el:"#app",router:x,store:W,components:{App:l},template:"<App/>"})},Oago:function(t,e){},dCOi:function(t,e){},eUv8:function(t,e){},zj2Q:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.9787f1c32febc5681fa3.js.map